<!DOCTYPE html>
<html lang="en">
  <head>
    <title>dReal: JSON Visualizer</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/dropzone.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="js/d3.v3.js"></script>
    <script src="js/underscore-min.js"></script>
    
    <meta charset="UTF-8">
  </head>
  
  <body>
    <div class="container">
      <div class="page-header">
        <h1>JSON Visualization for the dReal Solver</h1> 
      </div> 

      
      <div id="chart" style="text-align:center">
        <div id="drop_zone"> Drop your JSON file here</div>    
      </div>
    </div><!-- /.container -->    

    <script>
      function handleDrop(e){
        e.stopPropagation();
        e.preventDefault();
        var file = e.dataTransfer.files[0];

        if (!file.name.match('\.json')) {
          alert("Only .json files are accepted");
        }
        else{
          var reader = new FileReader();
          reader.onload = function(f){
            json = reader.result;
                document.getElementById("chart").innerHTML = json;            
            $.ajax({
              url: 'http://localhost:8081',
              data: '{"data":"' + "HELLo" + '"}',
              type: 'POST',
              success: function (data){
                // document.getElementById("chart").innerHTML = data.msg;
              },
              error: function(xhr, status, error){
                // document.getElementById("chart").innerHTML = error.message;
              }
            });
          }
          reader.readAsText(file);
        }
      }

      function handleDragOver(e){
        e.stopPropagation();
        e.preventDefault();
        e.dataTransfer.dropEffect = 'copy';
      }

      var dropZone = document.getElementById("drop_zone");
      dropZone.addEventListener('dragover', handleDragOver, false);
      dropZone.addEventListener('drop', handleDrop, false);
    </script> 

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html>
